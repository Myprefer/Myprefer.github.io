{"title":"Python爬虫基础","uid":"a7f9556995dc0359ec899cd406ee1ae6","slug":"Python爬虫基础","date":"2024-01-28T05:33:12.000Z","updated":"2024-01-28T06:22:03.350Z","comments":true,"path":"api/articles/Python爬虫基础.json","keywords":null,"cover":[],"content":"<p><a href=\"https://blog.csdn.net/qq_44907926/article/details/118585030\">一篇万字博文带你入坑爬虫这条不归路 【万字图文】_深宫曲易次元攻略-CSDN博客</a></p>\n<h3 id=\"爬虫概念\"><a href=\"#爬虫概念\" class=\"headerlink\" title=\"爬虫概念\"></a>爬虫概念</h3><h4 id=\"定义\"><a href=\"#定义\" class=\"headerlink\" title=\"定义\"></a>定义</h4><ul>\n<li>网络爬虫是<strong>伪装</strong>成客户端与服务端进行<strong>数据交互</strong>的程序。</li>\n</ul>\n<h4 id=\"应用\"><a href=\"#应用\" class=\"headerlink\" title=\"应用\"></a>应用</h4><ul>\n<li>数据采集, 搜索引擎, 模拟操作, 软件测试, 网络安全(信息轰炸, web漏洞扫描)</li>\n</ul>\n<h4 id=\"一般流程\"><a href=\"#一般流程\" class=\"headerlink\" title=\"一般流程\"></a>一般流程</h4><ul>\n<li><img src=\"https://img-blog.csdnimg.cn/20210709001610901.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQ0OTA3OTI2,size_16,color_FFFFFF,t_70\" alt=\"一般爬虫开发流程\"></li>\n</ul>\n<hr>\n<h3 id=\"会话技术\"><a href=\"#会话技术\" class=\"headerlink\" title=\"会话技术:\"></a>会话技术:</h3><h4 id=\"Cookie-s\"><a href=\"#Cookie-s\" class=\"headerlink\" title=\"Cookie(s)\"></a>Cookie(s)</h4><ul>\n<li><p>介绍: 指某些网站为了辨别用户身份、进行 session 跟踪而储存在<strong>用户本地</strong>终端上的数据, 实际由服务器发送给客户端, <strong>可以理解为一个凭证</strong>, 服务器可以以此辨别用户身份</p>\n</li>\n<li><p>爬虫中使用cookie</p>\n<ul>\n<li>好处: 能够访问登录界面</li>\n<li>坏处: 容易被反爬</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"Session\"><a href=\"#Session\" class=\"headerlink\" title=\"Session\"></a>Session</h4><ul>\n<li>含义: 在爬虫中, 指<strong>一个浏览器窗口从打开到关闭的这个期间</strong></li>\n<li>目的: 在一个客户打开浏览器到关闭的这个期间, 发起的所有请求都可以被识别为<strong>同一个用户</strong></li>\n<li>实现: 客户访问网站时, 生成一个包含SessionID的cookie, 用于服务器识别</li>\n<li><strong>Session是储存在服务器上的数据</strong></li>\n</ul>\n<hr>\n<h3 id=\"爬虫基础\"><a href=\"#爬虫基础\" class=\"headerlink\" title=\"爬虫基础\"></a>爬虫基础</h3><h4 id=\"requests发送请求\"><a href=\"#requests发送请求\" class=\"headerlink\" title=\"requests发送请求\"></a>requests发送请求</h4><ul>\n<li><p>GET请求示例(失败)</p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> requests</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">r </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> requests</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.bilibili.com/</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">r</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">status_code</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">r</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">ok</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>  输出:</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">&lt;Response [412]&gt;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">False</span></span></code></pre></div></li>\n<li><p>修改请求头, 模拟浏览器访问:</p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> requests</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">headers </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">User-Agent</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36 Edg/121.0.0.0</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">r </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> requests</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">https://www.bilibili.com/</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #BABED8; font-style: italic\">headers</span><span style=\"color: #89DDFF\">=</span><span style=\"color: #82AAFF\">headers</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">r</span><span style=\"color: #89DDFF\">)</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">r</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">ok</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>输出(成功):</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">&lt;Response [200]&gt;</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">True</span></span></code></pre></div></li>\n</ul>\n<h4 id=\"BeautifulSoup解析获取的html文件\"><a href=\"#BeautifulSoup解析获取的html文件\" class=\"headerlink\" title=\"BeautifulSoup解析获取的html文件\"></a>BeautifulSoup解析获取的html文件</h4><ul>\n<li><p>示例:</p>\n<div class=\"language-python\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">python</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> requests</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF; font-style: italic\">from</span><span style=\"color: #BABED8\"> bs4 </span><span style=\"color: #89DDFF; font-style: italic\">import</span><span style=\"color: #BABED8\"> BeautifulSoup</span></span>\n<span class=\"line\"></span>\n<span class=\"line\"><span style=\"color: #BABED8\">headers </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">User-Agent</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/121.0.0.0 Safari/537.36 Edg/121.0.0.0</span><span style=\"color: #89DDFF\">&quot;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    response </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> requests</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">get</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #C792EA\">f</span><span style=\"color: #C3E88D\">&quot;https://movie.douban.com/top250)</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">    content = response.text</span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">                            </span></span>\n<span class=\"line\"><span style=\"color: #C3E88D\">    soup = BeautifulSoup(content, &quot;</span><span style=\"color: #82AAFF\">html</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #F07178\">parser</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">)</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">    </span><span style=\"color: #BABED8; font-style: italic\">title</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #82AAFF\"> soup</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">find_all</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">div</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">class</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">info</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;)</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">    </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #82AAFF\"> info </span><span style=\"color: #89DDFF; font-style: italic\">in</span><span style=\"color: #82AAFF\"> title</span><span style=\"color: #89DDFF\">:</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">        </span><span style=\"color: #89DDFF; font-style: italic\">for</span><span style=\"color: #82AAFF\"> hd </span><span style=\"color: #89DDFF; font-style: italic\">in</span><span style=\"color: #82AAFF\"> info</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">find_all</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">div</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">class</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">hd</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;):</span></span>\n<span class=\"line\"><span style=\"color: #82AAFF\">            print</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #82AAFF\">hd</span><span style=\"color: #89DDFF\">.</span><span style=\"color: #82AAFF\">find</span><span style=\"color: #89DDFF\">(</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">span</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">,</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">&#123;</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">class</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">:</span><span style=\"color: #82AAFF\"> </span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #C3E88D\">title</span><span style=\"color: #89DDFF\">&quot;</span><span style=\"color: #89DDFF\">&#125;).</span><span style=\"color: #F07178\">string</span><span style=\"color: #89DDFF\">)</span></span></code></pre></div><p>输出:</p>\n<div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">肖申克的救赎</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">霸王别姬</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">阿甘正传</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">泰坦尼克号</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">这个杀手不太冷</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">千与千寻</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">美丽人生</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">星际穿越</span></span>\n<span class=\"line\"><span style=\"color: #babed8\">盗梦空间</span></span></code></pre></div></li>\n<li><p><code>soup = BeautifulSoup(content, &quot;html.parser&quot;)</code>, 解析content中的HTML</p>\n</li>\n<li><p>XX.find()返回查找的第一个</p>\n</li>\n<li><p>XX.find_all()返回找到的全部内容的一个列表</p>\n</li>\n</ul>\n","feature":true,"text":"一篇万字博文带你入坑爬虫这条不归路 【万字图文】_深宫曲易次元攻略-CSDN博客 爬虫概念定义 网络爬虫是伪装成客户端与服务端进行数据交互的程序。 应用 数据采...","permalink":"/post/Python爬虫基础","photos":[],"count_time":{"symbolsCount":"1.9k","symbolsTime":"2 mins."},"categories":[],"tags":[{"name":"网络安全","slug":"网络安全","count":9,"path":"api/tags/网络安全.json"},{"name":"Python基础","slug":"Python基础","count":1,"path":"api/tags/Python基础.json"},{"name":"学习日志","slug":"学习日志","count":8,"path":"api/tags/学习日志.json"}],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%88%AC%E8%99%AB%E6%A6%82%E5%BF%B5\"><span class=\"toc-text\">爬虫概念</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%9A%E4%B9%89\"><span class=\"toc-text\">定义</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%BA%94%E7%94%A8\"><span class=\"toc-text\">应用</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%B8%80%E8%88%AC%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">一般流程</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BC%9A%E8%AF%9D%E6%8A%80%E6%9C%AF\"><span class=\"toc-text\">会话技术:</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Cookie-s\"><span class=\"toc-text\">Cookie(s)</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#Session\"><span class=\"toc-text\">Session</span></a></li></ol></li><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E7%88%AC%E8%99%AB%E5%9F%BA%E7%A1%80\"><span class=\"toc-text\">爬虫基础</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#requests%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82\"><span class=\"toc-text\">requests发送请求</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#BeautifulSoup%E8%A7%A3%E6%9E%90%E8%8E%B7%E5%8F%96%E7%9A%84html%E6%96%87%E4%BB%B6\"><span class=\"toc-text\">BeautifulSoup解析获取的html文件</span></a></li></ol></li></ol>","author":{"name":"Myprefer","slug":"blog-author","avatar":"https://i0.imgs.ovh/2024/01/23/x3DH5.jpeg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"小迪安全 P3","uid":"d471c3c5657b4c4f477f2defc20d21ed","slug":"小迪安全-P3","date":"2024-01-28T13:29:15.000Z","updated":"2024-01-28T15:09:26.217Z","comments":true,"path":"api/articles/小迪安全-P3.json","keywords":null,"cover":null,"text":" 学会不同对象采用不同抓包封包抓取技术分析 抓包 当需要知道应用程序等的IP, 域名时需要抓包后分析 对不同的协议用不同的工具 ","permalink":"/post/小迪安全-P3","photos":[],"count_time":{"symbolsCount":76,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"网络安全","slug":"网络安全","count":9,"path":"api/tags/网络安全.json"},{"name":"学习日志","slug":"学习日志","count":8,"path":"api/tags/学习日志.json"},{"name":"小迪安全","slug":"小迪安全","count":4,"path":"api/tags/小迪安全.json"},{"name":"基础入门","slug":"基础入门","count":4,"path":"api/tags/基础入门.json"}],"author":{"name":"Myprefer","slug":"blog-author","avatar":"https://i0.imgs.ovh/2024/01/23/x3DH5.jpeg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"HTTP协议请求结构","uid":"fc05fbb308fc2fe612857f2de1b31069","slug":"HTTP协议请求结构","date":"2024-01-27T12:53:28.000Z","updated":"2024-01-28T05:51:41.866Z","comments":true,"path":"api/articles/HTTP协议请求结构.json","keywords":null,"cover":[],"text":"HTTP协议 HTTP: Hypertext Transfer Protocol 作用: 是一种用于传输超文本的协议。 是客户端和服务器之间进行通信的基础，常用...","permalink":"/post/HTTP协议请求结构","photos":[],"count_time":{"symbolsCount":"1.6k","symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"网络安全","slug":"网络安全","count":9,"path":"api/tags/网络安全.json"},{"name":"学习日志","slug":"学习日志","count":8,"path":"api/tags/学习日志.json"}],"author":{"name":"Myprefer","slug":"blog-author","avatar":"https://i0.imgs.ovh/2024/01/23/x3DH5.jpeg","link":"/","description":"","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}}}}