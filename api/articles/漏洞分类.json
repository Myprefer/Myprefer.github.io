{"title":"漏洞分类","uid":"d8c6760c0189ec6549efd1450ac394f5","slug":"漏洞分类","date":"2024-02-14T08:23:14.000Z","updated":"2024-02-18T13:47:37.899Z","comments":true,"path":"api/articles/漏洞分类.json","keywords":null,"cover":null,"content":"<h2 id=\"XSS跨站脚本\"><a href=\"#XSS跨站脚本\" class=\"headerlink\" title=\"XSS跨站脚本\"></a>XSS跨站脚本</h2><h3 id=\"介绍\"><a href=\"#介绍\" class=\"headerlink\" title=\"介绍\"></a>介绍</h3><ul>\n<li><p>跨站脚本，英文全称：Cross-Site Scripting</p>\n</li>\n<li><p>通过输入可以被解析的特殊字符串, 如</p>\n<div class=\"language-html\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">html</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #89DDFF\">&lt;/</span><span style=\"color: #F07178\">p</span><span style=\"color: #89DDFF\">&gt;&lt;</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;</span><span style=\"color: #82AAFF\">alert</span><span style=\"color: #BABED8\">(</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">this is an alart</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #BABED8\">)</span><span style=\"color: #89DDFF\">;&lt;/</span><span style=\"color: #F07178\">script</span><span style=\"color: #89DDFF\">&gt;&lt;</span><span style=\"color: #F07178\">p</span><span style=\"color: #89DDFF\">&gt;</span></span></code></pre></div><p>其中script标签内的代码会被执行</p>\n</li>\n<li><p>分类: 反射型XSS, 储存型XSS, DOM型XSS</p>\n<ul>\n<li><p>反射型XSS</p>\n<ul>\n<li><p>执行流程:</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1、在输入点输入内容，构造恶意代码，输入点是以GET方式提交的，我们可以在URL中看到输入的内容<br>2、后端接收提交的数据，并没有对输入进行过滤<br>3、然后就将其呈现给了前端，浏览器执行了恶意代码</p></blockquote>\n</li>\n</ul>\n</li>\n<li><p>存储型XSS</p>\n<ul>\n<li><p>存储型XSS和反射型XSS区别就在于，存储型XSS是将恶意构造的代码存储在了数据库</p>\n</li>\n<li><p>执行流程:</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>1、在留言板处输入内容，构造恶意代码<br>2、将输入的内容，提交给后端代码执行，后端对输入过滤不严格，然后执行插入(insert)数据库操作<br>3、此时，我们的恶意代码已经保存在了数据库，<br>4、不管何时何地何人查看这条留言，都会被执行恶意代码，除非数据库中删除这条恶意代码</p></blockquote>\n</li>\n</ul>\n</li>\n<li><p>DOM型XSS</p>\n<ul>\n<li>基于文档对象模型的漏洞，可以动态的构造DOM节点</li>\n<li>不经过后端代码，直接构造恶意代码，即可在前端展示</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"测试流程\"><a href=\"#测试流程\" class=\"headerlink\" title=\"测试流程\"></a>测试流程</h4><ol>\n<li>在目标站点上找到输入点, 比如查询接口, 留言板等</li>\n<li>输入一组“特殊字符+唯一识别字符”，点击提交后,查看返回的源码，是否有做对应的处理</li>\n<li>通过搜索定位到唯一字符，结合唯一字符前后语法确认是否可以构造执行js的条件(构造闭合);</li>\n<li>提交构造的脚本代码(以及各种绕过姿势)，看是否可以成功执行，如果成功执行则说明存在XSS漏洞;</li>\n</ol>\n<h4 id=\"tips\"><a href=\"#tips\" class=\"headerlink\" title=\"tips\"></a>tips</h4><ol>\n<li>一般查询接口容易出现反射型XSS，留言板容易出现存储型XSS</li>\n<li>由于后台可能存在过滤措施,构造的script可能会被过滤掉，而无法生效,或者环境限制了执行(浏览器);</li>\n<li>通过变化不同的script，尝试绕过后台过滤机制;</li>\n</ol>\n<h4 id=\"XSS绕过\"><a href=\"#XSS绕过\" class=\"headerlink\" title=\"XSS绕过\"></a>XSS绕过</h4><ul>\n<li>转换<ul>\n<li>大小写<code>&lt;ScRipT&gt;</code></li>\n<li>拼凑<code>&lt;scr&lt;script&gt;ipt&gt;</code></li>\n<li>注释<code>&lt;sc&lt;!--a--&gt;ript&gt;</code></li>\n</ul>\n</li>\n<li>编码<ul>\n<li>url编码</li>\n<li>html编码</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"SQL注入\"><a href=\"#SQL注入\" class=\"headerlink\" title=\"SQL注入\"></a>SQL注入</h2><h4 id=\"概述\"><a href=\"#概述\" class=\"headerlink\" title=\"概述\"></a>概述</h4><ul>\n<li><p>攻击者可以通过合法输入点提交一些精心构造的语句, 从而欺骗后台数据库对其进行执行, 导致数据库信息泄露</p>\n</li>\n<li><p>例如:<br>正常输入: <code>1</code>, 执行<code>select password from users where id=1</code><br>非法输入:<code>1 or 1=1</code>, 执行<code>select password from users where id=1 or 1=1;</code><br>后者会输出表中的所有password</p>\n</li>\n</ul>\n<h4 id=\"攻击流程\"><a href=\"#攻击流程\" class=\"headerlink\" title=\"攻击流程\"></a>攻击流程</h4><ol>\n<li><p>注入点探测(自动&#x2F;手动)</p>\n<ul>\n<li>判断注入点类型</li>\n<li>判断查询列数</li>\n<li>判断显示位置</li>\n</ul>\n</li>\n<li><p>信息获取</p>\n<ul>\n<li><p>获取所有数据库名</p>\n<blockquote><span class=\"custom-blockquote-svg\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"\" xmlns=\"http://www.w3.org/2000/svg\" data-reactroot=\"\">\n<path fill=\"\" d=\"M22 12C22 6.5 17.5 2 12 2C6.5 2 2 6.5 2 12C2 17.5 6.5 22 12 22C13.8 22 15.5 21.5 17 20.6L22 22L20.7 17C21.5 15.5 22 13.8 22 12Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\" undefined=\"1\"></path>\n<path fill=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\" undefined=\"1\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M17 8.5C15.23 8.97 14.07 10.84 14.01 13.27C14 13.33 14 13.4 14 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M9 8.5C7.23 8.97 6.07 10.84 6.01 13.27C6 13.33 6 13.4 6 13.47V13.5\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M15.97 11.5H16.04C17.12 11.5 18 12.38 18 13.47V13.53C18 14.62 17.12 15.5 16.03 15.5H15.96C14.88 15.5 14 14.62 14 13.53V13.46C14 12.38 14.88 11.5 15.97 11.5Z\"></path>\n<path stroke-linejoin=\"round\" stroke-linecap=\"round\" stroke-miterlimit=\"10\" stroke-width=\"2\" stroke=\"\" d=\"M7.97 11.5H8.04C9.12 11.5 10 12.38 10 13.47V13.53C10 14.62 9.12 15.5 8.03 15.5H7.97C6.88 15.5 6 14.62 6 13.53V13.46C6 12.38 6.88 11.5 7.97 11.5Z\"></path>\n</svg>\n</span><p>一次性显示全部:group_concat(字段名)</p>\n<p>逐一显示: limit</p></blockquote>\n</li>\n<li><p>获取某数据库所有表名</p>\n</li>\n<li><p>获取某库某表中所有字段名</p>\n</li>\n<li><p>获取字段的数据</p>\n</li>\n</ul>\n</li>\n<li><p>获取权限</p>\n</li>\n</ol>\n<h4 id=\"注入点类型\"><a href=\"#注入点类型\" class=\"headerlink\" title=\"注入点类型\"></a>注入点类型</h4><ul>\n<li>数字型</li>\n<li>字符型: <code>&#39;xxx&#39;</code></li>\n<li>搜索型: <code>%xxx%</code></li>\n</ul>\n<p><em>根据类型进行构造闭合</em></p>\n<h4 id=\"基于union联合查询的信息获取\"><a href=\"#基于union联合查询的信息获取\" class=\"headerlink\" title=\"基于union联合查询的信息获取\"></a>基于union联合查询的信息获取</h4><ul>\n<li>查询列数必须相同</li>\n</ul>\n<h4 id=\"判断查询列数\"><a href=\"#判断查询列数\" class=\"headerlink\" title=\"判断查询列数\"></a>判断查询列数</h4><ul>\n<li>order by: 按照指定字段名进行排序</li>\n</ul>\n<h4 id=\"基于报错信息获取\"><a href=\"#基于报错信息获取\" class=\"headerlink\" title=\"基于报错信息获取\"></a>基于报错信息获取</h4><ul>\n<li>使用一些指定的函数来制造报错, 从报错信息中获取特定的信息</li>\n<li>背景条件: 后台没有屏蔽报错信息, 在语法发生错误时会输出在前端</li>\n</ul>\n<h5 id=\"报错函数\"><a href=\"#报错函数\" class=\"headerlink\" title=\"报错函数\"></a>报错函数</h5><ul>\n<li><p><code>updatexml()</code></p>\n<div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">updatexml(xml_document, XPathstring, new_value)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">#第一个参数: 表中的字段名(字符串)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">#第二个参数:Xpath格式的字符串</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">#String格式，替换查找到的符合条件的</span></span></code></pre></div><p>**”XPath定位必须是有效的, 否则会发送错误”**可以利用这一点制造报错信</p>\n<p>例如<code>updatexml(1,concat(0x7e,database(),0))</code>会产生报错信息, 其中有<code>database()</code>执行的结果</p>\n</li>\n<li><p><code>extractvalue()</code></p>\n<div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">extractvalue(xml_document, xpath_string)</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">#同样通过xpath产生报错</span></span></code></pre></div></li>\n<li><p><code>floor()</code><br>取整函数, 示例:</p>\n<div class=\"language-sql\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">sql</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #BABED8\">xxx</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\"> and (select 2 from (select count(*),concat(user(),floor(rand(0)*2))x from information_schema.tables group by x)a)#</span></span></code></pre></div></li>\n</ul>\n<h4 id=\"盲注\"><a href=\"#盲注\" class=\"headerlink\" title=\"盲注\"></a>盲注</h4><ul>\n<li>后台屏蔽了报错信息, 无法根据报错进行注入的判断  </li>\n<li>分类<ul>\n<li>基于真假, 例:<code>vince&#39; and ascii(substr(database(),1,1))=112#</code></li>\n<li>基于时间, 例:<code>vince&#39; and if((ascii(substr(database(),1,1)))=112,sleep(5),null)#</code></li>\n</ul>\n</li>\n<li>通过<code>ascii(substr((xx语句), n, n))=x</code>判断</li>\n</ul>\n<h4 id=\"宽字节注入\"><a href=\"#宽字节注入\" class=\"headerlink\" title=\"宽字节注入\"></a>宽字节注入</h4><ul>\n<li>后端对输入的内容进行了转义, <code>&#39;</code>转义为<code>\\&#39;</code>使原本的payload<code>vince&#39; or 1=1 ;#</code>无法使用</li>\n<li>由于mysql使用gbk编码, 单引号转义后编码为<code>%5c%27</code>, 如果在单引号前面输入%df使其变成<code>%df%5c%27</code>前面的<code>%df%5c</code>就会被解析为一个汉字, 单引号<code>%27</code>就成功逃逸了, 实现了闭合</li>\n<li>payload修改为<code>vince%df&#39; or 1=1;#</code></li>\n</ul>\n<h4 id=\"SQLmap使用\"><a href=\"#SQLmap使用\" class=\"headerlink\" title=\"SQLmap使用\"></a>SQLmap使用</h4><p><a href=\"https://sqlmap.highlight.ink/\">文档介绍 - sqlmap 用户手册 (highlight.ink)</a></p>\n<ol>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">-u &quot;url&quot; --cookie=&quot;xxx&quot; //带上cookie对URL进行注入探测</span></span></code></pre></div></li>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">-u &quot;url&quot; --cookie=&quot;xxx&quot; --current-db //获取数据库名</span></span></code></pre></div></li>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">-u &quot;url&quot; --cookie=&quot;xxx&quot; -D xxx --tables //获取表名</span></span></code></pre></div></li>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">-u &quot;url&quot; --cookie=&quot;xxx&quot; -D xxx -T xxx --columns //获取列名</span></span></code></pre></div></li>\n<li><div class=\"language-txt\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">txt</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #babed8\">-u &quot;url&quot; --cookie=&quot;xxx&quot; -D xxx -T xxx -C xxx yyy,zzz,xxx --dump //获取指定列的信息</span></span></code></pre></div><p><em>tip</em>:<code>--start 1 --stop 10 (只获取前十列数据)</code></p>\n</li>\n</ol>\n<h2 id=\"文件漏洞\"><a href=\"#文件漏洞\" class=\"headerlink\" title=\"文件漏洞\"></a>文件漏洞</h2><h4 id=\"任意文件读取与下载\"><a href=\"#任意文件读取与下载\" class=\"headerlink\" title=\"任意文件读取与下载\"></a>任意文件读取与下载</h4><h5 id=\"介绍-1\"><a href=\"#介绍-1\" class=\"headerlink\" title=\"介绍\"></a>介绍</h5><ul>\n<li><p>当网站需要提供文件读取或文件下载功能，且对用户读取或下载的文件不做限制，则用户就能够恶意读取或下载任意敏感文件</p>\n</li>\n<li><p>例如:</p>\n</li>\n</ul>\n<div class=\"language-php\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">php</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 文件读取</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">&lt;?</span><span style=\"color: #BABED8\">php</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #BABED8\">filename </span><span style=\"color: #89DDFF\">=</span><span style=\"color: #BABED8\"> </span><span style=\"color: #89DDFF\">$</span><span style=\"color: #BABED8\">_GET</span><span style=\"color: #89DDFF\">[</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #C3E88D\">filename</span><span style=\"color: #89DDFF\">&#39;</span><span style=\"color: #89DDFF\">];</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF; font-style: italic\">if</span><span style=\"color: #89DDFF\">($</span><span style=\"color: #BABED8\">filename</span><span style=\"color: #89DDFF\">)&#123;</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">        </span><span style=\"color: #82AAFF\">echo</span><span style=\"color: #BABED8\"> </span><span style=\"color: #82AAFF\">file_get_contents</span><span style=\"color: #89DDFF\">($</span><span style=\"color: #BABED8\">filename</span><span style=\"color: #89DDFF\">);</span></span>\n<span class=\"line\"><span style=\"color: #BABED8\">    </span><span style=\"color: #89DDFF\">&#125;</span></span>\n<span class=\"line\"><span style=\"color: #89DDFF\">?&gt;</span></span></code></pre></div><div class=\"language-php\"><button title=\"Copy code\" class=\"copy\"></button><span class=\"lang\">php</span><pre class=\"shiki material-theme-palenight\" style=\"background-color: #1a1a1a\" tabindex=\"0\"><code><span class=\"line\"><span style=\"color: #676E95; font-style: italic\">// 文件下载</span></span></code></pre></div><h2 id=\"命令执行漏洞\"><a href=\"#命令执行漏洞\" class=\"headerlink\" title=\"命令执行漏洞\"></a>命令执行漏洞</h2><h2 id=\"越权漏洞\"><a href=\"#越权漏洞\" class=\"headerlink\" title=\"越权漏洞\"></a>越权漏洞</h2><ul>\n<li><p>由于没有对用户权限进行严格的判断, 导致低权限账号可以去完成高权限账号的操作</p>\n</li>\n<li><p>属于逻辑漏洞, 是由于权限校验的逻辑不够严谨</p>\n</li>\n<li><p>水平越权</p>\n<ul>\n<li>同等权限级别间</li>\n<li>服务器后台可能没有对用户权限做严格的判断, 可能导致一个用户能够执行另一个用户的操作</li>\n</ul>\n</li>\n<li><p>垂直越权</p>\n<ul>\n<li>不同权限级别间</li>\n<li>先抓取超级管理员执行增加用户的数据包, 然后退出登录, 改为登录普通管理员的账号, 将获取到的数据包的请求头中的cookie替换为普通管理员的cookie, 在请求体中填入操作信息</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"会话管理漏洞\"><a href=\"#会话管理漏洞\" class=\"headerlink\" title=\"会话管理漏洞\"></a>会话管理漏洞</h2>","feature":true,"text":"XSS跨站脚本介绍 跨站脚本，英文全称：Cross-Site Scripting 通过输入可以被解析的特殊字符串, 如 html&lt;/p&gt;&lt;sc...","permalink":"/post/漏洞分类","photos":[],"count_time":{"symbolsCount":"3.3k","symbolsTime":"3 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#XSS%E8%B7%A8%E7%AB%99%E8%84%9A%E6%9C%AC\"><span class=\"toc-text\">XSS跨站脚本</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-3\"><a class=\"toc-link\" href=\"#%E4%BB%8B%E7%BB%8D\"><span class=\"toc-text\">介绍</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B5%8B%E8%AF%95%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">测试流程</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#tips\"><span class=\"toc-text\">tips</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#XSS%E7%BB%95%E8%BF%87\"><span class=\"toc-text\">XSS绕过</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#SQL%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">SQL注入</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%A6%82%E8%BF%B0\"><span class=\"toc-text\">概述</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%94%BB%E5%87%BB%E6%B5%81%E7%A8%8B\"><span class=\"toc-text\">攻击流程</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E6%B3%A8%E5%85%A5%E7%82%B9%E7%B1%BB%E5%9E%8B\"><span class=\"toc-text\">注入点类型</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E4%BA%8Eunion%E8%81%94%E5%90%88%E6%9F%A5%E8%AF%A2%E7%9A%84%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96\"><span class=\"toc-text\">基于union联合查询的信息获取</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%88%A4%E6%96%AD%E6%9F%A5%E8%AF%A2%E5%88%97%E6%95%B0\"><span class=\"toc-text\">判断查询列数</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%9F%BA%E4%BA%8E%E6%8A%A5%E9%94%99%E4%BF%A1%E6%81%AF%E8%8E%B7%E5%8F%96\"><span class=\"toc-text\">基于报错信息获取</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E6%8A%A5%E9%94%99%E5%87%BD%E6%95%B0\"><span class=\"toc-text\">报错函数</span></a></li></ol></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E7%9B%B2%E6%B3%A8\"><span class=\"toc-text\">盲注</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5\"><span class=\"toc-text\">宽字节注入</span></a></li><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#SQLmap%E4%BD%BF%E7%94%A8\"><span class=\"toc-text\">SQLmap使用</span></a></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E6%96%87%E4%BB%B6%E6%BC%8F%E6%B4%9E\"><span class=\"toc-text\">文件漏洞</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-4\"><a class=\"toc-link\" href=\"#%E4%BB%BB%E6%84%8F%E6%96%87%E4%BB%B6%E8%AF%BB%E5%8F%96%E4%B8%8E%E4%B8%8B%E8%BD%BD\"><span class=\"toc-text\">任意文件读取与下载</span></a><ol class=\"toc-child\"><li class=\"toc-item toc-level-5\"><a class=\"toc-link\" href=\"#%E4%BB%8B%E7%BB%8D-1\"><span class=\"toc-text\">介绍</span></a></li></ol></li></ol></li></ol></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E5%91%BD%E4%BB%A4%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E\"><span class=\"toc-text\">命令执行漏洞</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E8%B6%8A%E6%9D%83%E6%BC%8F%E6%B4%9E\"><span class=\"toc-text\">越权漏洞</span></a></li><li class=\"toc-item toc-level-2\"><a class=\"toc-link\" href=\"#%E4%BC%9A%E8%AF%9D%E7%AE%A1%E7%90%86%E6%BC%8F%E6%B4%9E\"><span class=\"toc-text\">会话管理漏洞</span></a></li></ol>","author":{"name":"Myprefer","slug":"blog-author","avatar":"https://i0.imgs.ovh/2024/01/23/x3DH5.jpeg","link":"https://myprefer.github.io/","description":"An ordinary learner","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"hidden":false,"prev_post":{"title":"代码审计","uid":"17847c41b99752f3acca442e5291529b","slug":"代码审计","date":"2024-02-14T08:54:53.000Z","updated":"2024-02-18T12:58:03.878Z","comments":true,"path":"api/articles/代码审计.json","keywords":null,"cover":[],"text":"概念 由具备丰富的编码经验并对安全编码及应用安全工具有很深刻理解的安全服务人员根据一定的代码规范和标准，针对应用程序源代码，从结构，脆弱性以及缺陷等方面进行审查...","permalink":"/post/代码审计","photos":[],"count_time":{"symbolsCount":898,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"Myprefer","slug":"blog-author","avatar":"https://i0.imgs.ovh/2024/01/23/x3DH5.jpeg","link":"https://myprefer.github.io/","description":"An ordinary learner","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{"title":"小迪安全-P5","uid":"73038ad70643fee370f3a704b5e4f344","slug":"小迪安全-P5","date":"2024-02-04T02:38:12.000Z","updated":"2024-02-04T02:40:20.797Z","comments":true,"path":"api/articles/小迪安全-P5.json","keywords":null,"cover":null,"text":"","permalink":"/post/小迪安全-P5","photos":[],"count_time":{"symbolsCount":0,"symbolsTime":"1 mins."},"categories":[],"tags":[{"name":"网络安全","slug":"网络安全","count":14,"path":"api/tags/网络安全.json"},{"name":"学习日志","slug":"学习日志","count":14,"path":"api/tags/学习日志.json"},{"name":"小迪安全","slug":"小迪安全","count":6,"path":"api/tags/小迪安全.json"},{"name":"基础入门","slug":"基础入门","count":6,"path":"api/tags/基础入门.json"}],"author":{"name":"Myprefer","slug":"blog-author","avatar":"https://i0.imgs.ovh/2024/01/23/x3DH5.jpeg","link":"https://myprefer.github.io/","description":"An ordinary learner","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true}}